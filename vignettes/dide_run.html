<!DOCTYPE html>
<!-- saved from url=(0091)file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">


<meta name="generator" content="pandoc">
<meta http-equiv="X-UA-Compatible" content="IE=EDGE">

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Running Fits on DIDE Cluster</title>

<script src="data:application/javascript;base64,Ly8gUGFuZG9jIDIuOSBhZGRzIGF0dHJpYnV0ZXMgb24gYm90aCBoZWFkZXIgYW5kIGRpdi4gV2UgcmVtb3ZlIHRoZSBmb3JtZXIgKHRvCi8vIGJlIGNvbXBhdGlibGUgd2l0aCB0aGUgYmVoYXZpb3Igb2YgUGFuZG9jIDwgMi44KS4KZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uKGUpIHsKICB2YXIgaHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJkaXYuc2VjdGlvbltjbGFzcyo9J2xldmVsJ10gPiA6Zmlyc3QtY2hpbGQiKTsKICB2YXIgaSwgaCwgYTsKICBmb3IgKGkgPSAwOyBpIDwgaHMubGVuZ3RoOyBpKyspIHsKICAgIGggPSBoc1tpXTsKICAgIGlmICghL15oWzEtNl0kL2kudGVzdChoLnRhZ05hbWUpKSBjb250aW51ZTsgIC8vIGl0IHNob3VsZCBiZSBhIGhlYWRlciBoMS1oNgogICAgYSA9IGguYXR0cmlidXRlczsKICAgIHdoaWxlIChhLmxlbmd0aCA+IDApIGgucmVtb3ZlQXR0cmlidXRlKGFbMF0ubmFtZSk7CiAgfQp9KTsK"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>


<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="data:text/css,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" type="text/css">




<script type="text/javascript" src="./dide_run_files/MathJax.js.download"></script><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 2px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 2px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: 1em}
.MathJax_MenuRadioCheck.RTL {right: 1em; left: auto}
.MathJax_MenuLabel {padding: 2px 2em 4px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #CCCCCC; margin: 4px 1px 0px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: Highlight; color: HighlightText}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style></head>

<body><div id="MathJax_Message" style="display: none;"></div>




<h1 class="title toc-ignore">Running Fits on DIDE Cluster</h1>



<div id="overview" class="section level1">
<h1>Overview</h1>
<p>This Rmd document gives an overview of the steps to be taken to run model fits on the DIDE HPC cluster, check results before collating and pushing to github.</p>
<p>As a background, the fits used to be run through a series of tasks in specific docker containers. At writing, docker can’t be run locally due to virtualisation not being enabled on this windows machine, but this will be explored again once/if this is enabled.</p>
<p>All code chunks are set to not eval so the knitted html is just for display purposes. I would recommend stepping through this Rmd each time to rerun the fits, updating parameters etc as and where needed. Sections with bash code are commented out and can be run from within the Rmd script if bash is correctly set up, and if not then can be run from the RStudio Terminal if set up to use Git Bash as the default for the terminal (see Tools &gt; Global Options &gt; Terminal &gt; New Terminals Open With)</p>
<p><br>
</p>
</div>
<div id="set-up" class="section level1">
<h1>Set up</h1>
<p>All tasks for running the model fits are conducted using orderly. This includes:</p>
<ol style="list-style-type: decimal">
<li><em>ecdc</em></li>
</ol>
<p>This task grabs input data from various online databases, that are then fed into downstream processes.</p>
<ol start="2" style="list-style-type: decimal">
<li><em>oxford_grt</em></li>
</ol>
<p>This task is largely redundant and is a hangover from when the oxford GRT database was used as a model input, but this has been replaced by Google mobility data.</p>
<ol start="3" style="list-style-type: decimal">
<li><em>google_brt</em></li>
</ol>
<p>Grabs and formats Google mobility data. For countries without mobility data, we use a Boosted regression tree model to infer mobility based on timing of govt. policies.</p>
<p>These 3 tasks form the initial tasks that ensure all the correct data is ready before running the actual model fits. To run these tasks, we simply need to provide what the <code>date</code> is that we are conducting model fits for, i.e.&nbsp;up to what date are we running, and also whether we are doing a <code>short_run</code>. The <code>short_run</code> argument dictates whether a small number of trees are used in the BRT.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># date &lt;- "2021-08-20"</span></span>
<span id="cb1-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb1-2" aria-hidden="true" tabindex="-1"></a>short_run <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>These arguments are then passed to our 3 tasks:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"*** ECDC data"</span>)</span>
<span id="cb2-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-2" aria-hidden="true" tabindex="-1"></a>ecdc_id <span class="ot">&lt;-</span> orderly<span class="sc">::</span><span class="fu">orderly_run</span>(<span class="st">"ecdc"</span>, <span class="at">parameters =</span> <span class="fu">list</span>(<span class="at">date=</span>date), <span class="at">echo =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-3" aria-hidden="true" tabindex="-1"></a>orderly<span class="sc">::</span><span class="fu">orderly_commit</span>(ecdc_id)</span>
<span id="cb2-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"*** Oxford GRT data"</span>)</span>
<span id="cb2-6"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-6" aria-hidden="true" tabindex="-1"></a>oxford_id <span class="ot">&lt;-</span> orderly<span class="sc">::</span><span class="fu">orderly_run</span>(<span class="st">"oxford_grt"</span>, <span class="at">parameters =</span> <span class="fu">list</span>(<span class="at">date=</span>date), <span class="at">echo =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-7"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-7" aria-hidden="true" tabindex="-1"></a>orderly<span class="sc">::</span><span class="fu">orderly_commit</span>(oxford_id)</span>
<span id="cb2-8"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"*** Google BRT data"</span>)</span>
<span id="cb2-10"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-10" aria-hidden="true" tabindex="-1"></a>google_id <span class="ot">&lt;-</span> orderly<span class="sc">::</span><span class="fu">orderly_run</span>(<span class="st">"brt_google_mobility"</span>, <span class="at">parameters =</span> <span class="fu">list</span>(<span class="at">date=</span>date, <span class="at">short_run =</span> short_run), <span class="at">echo =</span> <span class="cn">FALSE</span>)</span>
<span id="cb2-11"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb2-11" aria-hidden="true" tabindex="-1"></a>orderly<span class="sc">::</span><span class="fu">orderly_commit</span>(google_id)</span></code></pre></div>
<p>Above, we are using <code>orderly::orderly_run</code> to run our 3 tasks in our R session, before then committing them to the orderly archive. Alternatively, you could run these from the terminal using:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># date=2021-08-16</span></span>
<span id="cb3-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ./orderly run ecdc date=$DATE</span></span></code></pre></div>
<p>With these tasks run, we now begin by creating our model fit tasks. Throughout the pandemic, we have updated the model fit tasks to include new data, new models etc. Each of the various model fit tasks starts <code>lmic_reports_</code>, but the current model task is <code>lmic_reports_vaccine</code>.</p>
<p>We run the the model fits on the DIDE HPC cluster. To do this we first bundle the orderly reports to be run using <code>orderly::orderly_bundle_pack</code>. The zip files generated from this are then copied to the <code>glodide</code> repository, which is used to submit these tasks.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">message</span>(<span class="st">"*** Creating country task bundles"</span>)</span>
<span id="cb4-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># main input parameters</span></span>
<span id="cb4-5"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-5" aria-hidden="true" tabindex="-1"></a>n_mcmc <span class="ot">&lt;-</span> <span class="dv">20000</span></span>
<span id="cb4-6"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-6" aria-hidden="true" tabindex="-1"></a>countries <span class="ot">&lt;-</span> <span class="st">"countries"</span></span>
<span id="cb4-7"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-7" aria-hidden="true" tabindex="-1"></a>parallel <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb4-8"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-9"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="co"># less needed input parameters</span></span>
<span id="cb4-10"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-10" aria-hidden="true" tabindex="-1"></a>full_scenarios <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb4-11"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-11" aria-hidden="true" tabindex="-1"></a>gibbs_sampling <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb4-12"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># get the isos</span></span>
<span id="cb4-14"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-14" aria-hidden="true" tabindex="-1"></a>iso3cs <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">'^[A-Z]{3}</span><span class="sc">\\</span><span class="st">s*'</span>, <span class="fu">readLines</span>(countries), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-15"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co"># make the orderly bundles to be run on the cluster</span></span>
<span id="cb4-17"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-17" aria-hidden="true" tabindex="-1"></a>test <span class="ot">&lt;-</span> <span class="cn">FALSE</span></span>
<span id="cb4-18"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(test) {</span>
<span id="cb4-19"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-19" aria-hidden="true" tabindex="-1"></a>path_bundles <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"L:/OJ/glodide/analysis/data"</span>,<span class="st">"raw_test"</span>, date)</span>
<span id="cb4-20"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-20" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb4-21"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-21" aria-hidden="true" tabindex="-1"></a>  path_bundles <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="st">"L:/OJ/glodide/analysis/data"</span>, <span class="st">"raw"</span>, date)</span>
<span id="cb4-22"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-22" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-23"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(path_bundles, <span class="at">showWarnings =</span> <span class="cn">FALSE</span>)</span>
<span id="cb4-24"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="co"># bundle these up - this will take like 10 mins to create all the zips. </span></span>
<span id="cb4-26"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-26" aria-hidden="true" tabindex="-1"></a>bundles <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb4-27"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-27" aria-hidden="true" tabindex="-1"></a>  iso3cs, <span class="cf">function</span>(x) {</span>
<span id="cb4-28"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-28" aria-hidden="true" tabindex="-1"></a>    orderly<span class="sc">::</span><span class="fu">orderly_bundle_pack</span>(</span>
<span id="cb4-29"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-29" aria-hidden="true" tabindex="-1"></a>      <span class="at">path =</span> path_bundles,</span>
<span id="cb4-30"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-30" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"lmic_reports_vaccine"</span>,</span>
<span id="cb4-31"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-31" aria-hidden="true" tabindex="-1"></a>      <span class="at">parameters =</span> <span class="fu">list</span>(</span>
<span id="cb4-32"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-32" aria-hidden="true" tabindex="-1"></a>        <span class="at">iso3c =</span> x,</span>
<span id="cb4-33"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-33" aria-hidden="true" tabindex="-1"></a>        <span class="at">date=</span>date,</span>
<span id="cb4-34"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-34" aria-hidden="true" tabindex="-1"></a>        <span class="at">short_run=</span>short_run,</span>
<span id="cb4-35"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-35" aria-hidden="true" tabindex="-1"></a>        <span class="at">parallel=</span>parallel,</span>
<span id="cb4-36"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-36" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_scenarios=</span>full_scenarios,</span>
<span id="cb4-37"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-37" aria-hidden="true" tabindex="-1"></a>        <span class="at">gibbs_sampling=</span>gibbs_sampling,</span>
<span id="cb4-38"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-38" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_mcmc=</span>n_mcmc</span>
<span id="cb4-39"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-39" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb4-40"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-40" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb4-41"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-41" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb4-42"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-42" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-43"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-44"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-44" aria-hidden="true" tabindex="-1"></a><span class="co"># now label these with the iso3cs and save the file paths</span></span>
<span id="cb4-45"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-45" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(bundles) <span class="ot">&lt;-</span> iso3cs</span>
<span id="cb4-46"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb4-46" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(bundles, <span class="fu">file.path</span>(path_bundles, <span class="st">"bundles.rds"</span>))</span></code></pre></div>
<p>This will create an orderly task for each country that is then saved in the location on the server where they are to be run. At this point, open the <code>glodide</code> repository on the server and run through the submission script to submit these to the cluster:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">system</span>(<span class="fu">paste0</span>(<span class="st">"open "</span>,<span class="st">"</span><span class="sc">\"</span><span class="st">"</span>,<span class="st">"L:/OJ/glodide/glodide.Rproj"</span>,<span class="st">"</span><span class="sc">\"</span><span class="st">"</span>))</span></code></pre></div>
<hr>
<p>After the tasks have all finished, we can check to see the fits to see if they are good:</p>
<p><br>
</p>
</div>
<div id="check-the-fits" class="section level1">
<h1>Check the fits</h1>
<p>To do this we take the path of the finished tasks from our bundles</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="co"># use the bundles paths to work out the path to the runs in derived</span></span>
<span id="cb6-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-3" aria-hidden="true" tabindex="-1"></a>paths <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"raw"</span>, <span class="st">"derived"</span>, <span class="fu">vapply</span>(bundles, <span class="at">FUN =</span> <span class="st">"[["</span>, <span class="at">FUN.VALUE =</span> <span class="fu">character</span>(<span class="dv">1</span>), <span class="st">"path"</span>))</span>
<span id="cb6-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># now extract the fitting.pdf files</span></span>
<span id="cb6-6"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-6" aria-hidden="true" tabindex="-1"></a>td <span class="ot">&lt;-</span> <span class="fu">tempdir</span>()</span>
<span id="cb6-7"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-7" aria-hidden="true" tabindex="-1"></a>fits <span class="ot">&lt;-</span> <span class="fu">lapply</span>(paths, <span class="cf">function</span>(x) {</span>
<span id="cb6-8"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">file.exists</span>(x)){</span>
<span id="cb6-9"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-9" aria-hidden="true" tabindex="-1"></a>    zip<span class="sc">::</span><span class="fu">unzip</span>(</span>
<span id="cb6-10"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">zipfile =</span> x, </span>
<span id="cb6-11"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">files =</span> <span class="fu">file.path</span>(<span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.zip"</span>, <span class="st">""</span>, <span class="fu">basename</span>(x)), <span class="st">"pack/fitting.pdf"</span>), </span>
<span id="cb6-12"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">exdir =</span> td</span>
<span id="cb6-13"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb6-14"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-14" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-15"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-15" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-16"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-17"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="co"># get the filepaths for these </span></span>
<span id="cb6-18"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-18" aria-hidden="true" tabindex="-1"></a>pdfs <span class="ot">&lt;-</span> <span class="fu">grep</span>(<span class="st">"fitting"</span>, <span class="fu">list.files</span>(td, <span class="at">full.names =</span> <span class="cn">TRUE</span>, <span class="at">recursive =</span> <span class="cn">TRUE</span>), <span class="at">value =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-19"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># combine the files that are larger than 0b. Ob files are for countries that have</span></span>
<span id="cb6-21"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># no COVID-19 deaths to date and as such don't have a fitting.pdf but this file is</span></span>
<span id="cb6-22"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-22" aria-hidden="true" tabindex="-1"></a><span class="co"># created because it needs to be for orderly to finish the task</span></span>
<span id="cb6-23"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-23" aria-hidden="true" tabindex="-1"></a>qpdf<span class="sc">::</span><span class="fu">pdf_combine</span>(</span>
<span id="cb6-24"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">input =</span> pdfs[<span class="fu">file.size</span>(pdfs) <span class="sc">&gt;</span> <span class="dv">0</span>], </span>
<span id="cb6-25"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">output =</span> <span class="fu">file.path</span>(<span class="st">"fits"</span>, <span class="fu">paste0</span>(<span class="st">"lmic_reports_vaccine_"</span>, date, <span class="st">".pdf"</span>))</span>
<span id="cb6-26"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb6-26" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Now we can view these to work out if they look good. See the troubleshoot for more info on what to look out for etc. If some countries need to be rerun, then work out which countries require rerunning and rebundle those to be run again:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bundle the countries we need to rerun</span></span>
<span id="cb7-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-2" aria-hidden="true" tabindex="-1"></a>iso3cs_to_rerun <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"BGD"</span>) </span>
<span id="cb7-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-3" aria-hidden="true" tabindex="-1"></a>bundles_to_rerun <span class="ot">&lt;-</span> <span class="fu">lapply</span>(</span>
<span id="cb7-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  iso3cs_to_rerun, </span>
<span id="cb7-5"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="cf">function</span>(x) {</span>
<span id="cb7-6"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    orderly<span class="sc">::</span><span class="fu">orderly_bundle_pack</span>(</span>
<span id="cb7-7"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">path =</span> path_bundles,</span>
<span id="cb7-8"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">name =</span> <span class="st">"lmic_reports_vaccine"</span>,</span>
<span id="cb7-9"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">parameters =</span> <span class="fu">list</span>(</span>
<span id="cb7-10"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">iso3c =</span> x,</span>
<span id="cb7-11"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">date=</span>date,</span>
<span id="cb7-12"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-12" aria-hidden="true" tabindex="-1"></a>        <span class="at">short_run=</span>short_run,</span>
<span id="cb7-13"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">parallel=</span>parallel,</span>
<span id="cb7-14"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">full_scenarios=</span>full_scenarios,</span>
<span id="cb7-15"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">gibbs_sampling=</span>gibbs_sampling,</span>
<span id="cb7-16"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">n_mcmc=</span>n_mcmc</span>
<span id="cb7-17"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-17" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb7-18"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-18" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb7-19"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-19" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb7-20"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-21"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-22"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-22" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(bundles_to_rerun) <span class="ot">&lt;-</span> iso3cs_to_rerun</span>
<span id="cb7-23"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(bundles_to_rerun, <span class="fu">file.path</span>(path_bundles, <span class="st">"BGD_to_rerun.rds"</span>))</span></code></pre></div>
<p>Then go to <code>glodide</code> and resubmit these and repeat above to see the fits. If they are better then replace the bundle paths in <code>bundles</code> object so we know which are the correct tasks to then pull back down.</p>
<p><br>
</p>
</div>
<div id="pull-fits-back-into-orderly" class="section level1">
<h1>Pull fits back into orderly</h1>
<p>Once we are happy with a set of fits for each country, we need to pull them back down off the server to local.</p>
<p>First read in the paths of the original bundles</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># get the original bundles</span></span>
<span id="cb8-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb8-2" aria-hidden="true" tabindex="-1"></a>bundles <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">file.path</span>(path_bundles, <span class="st">"bundles.rds"</span>))</span></code></pre></div>
<p>Depending on whether any needed to be rerun, the below will be needed to replace paths in bundles, with the file paths of any new runs. For example, below I did two reruns (‘bundles_to_rerun.rds’ and ‘BGD_to_rerun.rds’), which I will use to replace their corresponding countries with in <code>bundles</code>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># any that we had to rerun</span></span>
<span id="cb9-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-3" aria-hidden="true" tabindex="-1"></a>rerun <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">file.path</span>(path_bundles, <span class="st">"bundles_to_rerun.rds"</span>))</span>
<span id="cb9-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-4" aria-hidden="true" tabindex="-1"></a>bgd_rerun <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">file.path</span>(path_bundles, <span class="st">"BGD_to_rerun.rds"</span>))</span>
<span id="cb9-5"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># replace the ones we rerun within bundles</span></span>
<span id="cb9-7"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-7" aria-hidden="true" tabindex="-1"></a>nms_ch <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">names</span>(rerun), <span class="fu">names</span>(bgd_rerun))</span>
<span id="cb9-8"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-8" aria-hidden="true" tabindex="-1"></a>bundles[nms_ch] <span class="ot">&lt;-</span> <span class="fu">c</span>(rerun, bgd_rerun)</span>
<span id="cb9-9"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># now get the filepaths of the tasks to import back</span></span>
<span id="cb9-11"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb9-11" aria-hidden="true" tabindex="-1"></a>tasks <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"raw"</span>, <span class="st">"derived"</span>, <span class="fu">as.character</span>(<span class="fu">vapply</span>(bundles, <span class="st">"[["</span>, <span class="fu">character</span>(<span class="dv">1</span>), <span class="st">"path"</span>)))</span></code></pre></div>
<p>Now that we have updated with the rerun bundles, we know import these back into our local <code>orderly</code> archive:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb10-1" aria-hidden="true" tabindex="-1"></a>import <span class="ot">&lt;-</span> <span class="fu">lapply</span>(tasks, orderly<span class="sc">::</span>orderly_bundle_import)</span>
<span id="cb10-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># just double check they all imported</span></span>
<span id="cb10-4"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(<span class="fu">unlist</span>(import))</span></code></pre></div>
<p><br>
</p>
</div>
<div id="create-the-changes-to-the-github-pages" class="section level1">
<h1>Create the changes to the github pages</h1>
<div id="get-gh-pages" class="section level2">
<h2>1. Get gh-pages</h2>
<p>The Github pages repository is at <a href="www.github.com:mrc-ide/global-lmic-reports">www.github.com:mrc-ide/global-lmic-reports</a> and contains all the outputs of model fits conducted to date and the web pages to describe the model fits for each country. It is cloned into <code>gh-pages</code>, which is where we collate the outputs of the model fits into.</p>
<p>If gh-pages is not in the repo, i.e.&nbsp;you have just clones <code>global-lmic-reports-orderly</code> down for example, then you need to run following in terminal (or from within this repo if the bash chunk tag is working correctly).</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb11-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mkdir gh-pages</span></span>
<span id="cb11-2"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># git clone git@github.com:mrc-ide/global-lmic-reports.git gh-pages</span></span></code></pre></div>
</div>
<div id="the-collation-step-for-run_collate_vaccine" class="section level2">
<h2>2. The collation step for run_collate_vaccine</h2>
<p>Next we run the collation step, where the necessary outputs from the model fits are copied to gh-pages. It conducts the following steps:</p>
<ol style="list-style-type: decimal">
<li>Fetches the latest run model fit for each country for the date argument provided.</li>
<li>Updates <code>pars_init.rds</code> in <code>lmic_reports_vaccine</code> with parameters from best model fit for each country.</li>
<li>Copies the pdfs/html files over to <code>gh-pages</code></li>
<li>Copies the projections from each model fit over and combines these into a combined data zip</li>
<li>Copies model projections to the <code>index_page</code> and <code>regional_page</code> tasks</li>
<li>Runs the remaining tasks needed to create the website (index, FAQ, regional pages)</li>
<li>Copies the output from these remaining tasks to gh-pages.</li>
</ol>
<p>Things to note before running. In step 2, we overwrite the <code>pars_init.rds</code> object in <code>lmic_reports_vaccine</code>. This is so that next time this task is run, we are using the best initial conditions for the next time you run <code>lmic_reports_vaccine</code>. As a result of this overwrite, be careful to make sure you are only calling this collation once you are happy you have the right model fits (and if not make sure <code>pars_init.rds</code> is backed up/committed).</p>
<p>Either execute this from the terminal or you can run it using the bash code chunk below (though it doesn’t produce output until after it has finished at the moment, which may be annoying so you can see the output).</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ./run/run_collate_vaccine.sh 2021-08-19</span></span></code></pre></div>
</div>
<div id="push-the-results-to-the-repository" class="section level2">
<h2>3. Push the results to the repository</h2>
<p>Once we are happy that the collation has worked we need to push this to Github. We do this in two steps as the git pack size if all done at once is too big. This is all in the following script:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="file:///C:/Users/ow813/AppData/Local/Temp/RtmpUbRusM/preview-425877e13055.dir/dide_run.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ./scripts/publish_website production</span></span></code></pre></div>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>



</body></html>